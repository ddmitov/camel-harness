<!DOCTYPE html>
<html>

	<head>
		<title>CamelHarness.js</title>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta charset="utf-8">

		<script type="text/javascript" src="camel-harness.js"></script>

		<style type="text/css">
			body {
				text-align: center;
				font-family: sans-serif;
				font-size: 20px;
				color: #ffffff;
				background-color: #222222;
				-webkit-text-size-adjust: 100%;
			}
			a {
				color: #ffffff;
				text-decoration: none;
			}
			a:hover {
				color: #ffffff;
				text-decoration: none;
			}
		</style>

		<script>
			// Determine the operating system:
			var osObject = require('os');
			var platform = osObject.platform();

			// Initialize 'path' object:
			var pathObject;
			if (platform !== "win32") {
				pathObject = require('path').posix;
			} else {
				pathObject = require('path').win32;
			}

			// Get the full path of the directory where Electron or NW.js binary is located:
			var binaryPath = process.execPath;
			var binaryDir = pathObject.dirname(binaryPath);

			// Get the full path of the application root directory:
			var applicationRootDirectory = pathObject.join(binaryDir, "resources/app");

			function startPerlVersionScript() {
				var scriptFullPath = pathObject.join(applicationRootDirectory, "version.pl");
				camelHarness(scriptFullPath, "versionScriptStdout", null, null, null, null, null);
			}

			function versionScriptStdout(stdout) {
				document.getElementById("version-script").innerHTML = stdout;
			}

			function startLongRunningPerlScriptOne() {
				var scriptFullPath = pathObject.join(applicationRootDirectory, "counter.pl");
				camelHarness(scriptFullPath, "longRunningPerlScriptOneStdout", null, null, null, null, null);
			}

			function longRunningPerlScriptOneStdout(stdout) {
				document.getElementById("long-running-script-one").innerHTML = stdout;
			}

			function startLongRunningPerlScriptTwo() {
				var scriptFullPath = pathObject.join(applicationRootDirectory, "counter.pl");
				camelHarness(scriptFullPath, "longRunningPerlScriptTwoStdout", null, null, null, null, null);
			}

			function longRunningPerlScriptTwoStdout(stdout) {
				document.getElementById("long-running-script-two").innerHTML = stdout;
			}
		</script>
	</head>

	<body>
		<p>
			<div id="version-script">
				<a href="#" onclick="startPerlVersionScript(); return false;">
					Perl Version</a>
			</div>
		</p>

		<p>
			<div id="long-running-script-one">
				<a href="#" onclick="startLongRunningPerlScriptOne(); return false;">
					Long Running Perl Script - First Instance</a>
			</div>
		</p>

		<p>
			<div id="long-running-script-two">
				<a href="#" onclick="startLongRunningPerlScriptTwo(); return false;">
					Long Running Perl Script - Second Instance</a>
			</div>
		</p>
	</body>
</html>
